<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Individual Assessment - Market Knowledge</title>
    <!-- Tailwind CSS CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        /* Custom baby pink background */
        body {
            font-family: 'Inter', sans-serif;
            background-color: #FDDDE6; /* A soft baby pink */
            display: flex;
            justify-content: center;
            align-items: flex-start; /* Align to top to prevent jumping */
            min-height: 100vh;
            padding: 2rem 1rem; /* Consistent padding on all sides */
            box-sizing: border-box;
            color: #1A202C; /* Dark gray for general text, close to black */
        }
        /* Custom scrollbar for better aesthetics */
        ::-webkit-scrollbar {
            width: 8px;
        }
        ::-webkit-scrollbar-track {
            background: #e0e0e0;
            border-radius: 10px;
        }
        ::-webkit-scrollbar-thumb {
            background: #888;
            border-radius: 10px;
        }
        ::-webkit-scrollbar-thumb:hover {
            background: #555;
        }
        /* Styles for feedback */
        .correct-answer-feedback {
            color: #10B981; /* Green-600 */
            font-weight: bold;
            margin-top: 0.5rem;
        }
        .incorrect-answer-feedback {
            color: #EF4444; /* Red-500 */
            font-weight: bold;
            margin-top: 0.5rem;
        }
        .selected-correct {
            background-color: #D1FAE5; /* Green-100 */
            border-color: #10B981; /* Green-600 */
        }
        .selected-incorrect {
            background-color: #FEE2E2; /* Red-100 */
            border-color: #EF4444; /* Red-500 */
        }
        /* Ensure labels have consistent height and alignment */
        .options-container label {
            display: flex;
            align-items: center; /* Vertically center radio button and text */
            padding: 0.75rem 0.5rem; /* More vertical padding for options */
            border: 1px solid transparent; /* Consistent border for all states */
        }
        .options-container label:hover {
            background-color: #F3F4F6; /* Light gray on hover */
        }
        /* Adjust text colors to black */
        h1, h2, p, span, label {
            color: #1A202C; /* Near black for all headings, paragraphs, spans, and labels */
        }
        /* Override specific elements if needed to ensure black text */
        .text-gray-900, .text-gray-800, .text-gray-700, .text-gray-600 {
            color: #1A202C !important;
        }
        .text-blue-600 { /* For radio button accent */
            color: #D147A3 !important; /* A darker pink for radio buttons */
        }
        .focus\:ring-blue-500:focus {
            --tw-ring-color: #D147A3 !important; /* Focus ring color */
        }
        .focus\:border-blue-500:focus {
            border-color: #D147A3 !important; /* Focus border color */
        }
    </style>
</head>
<body class="antialiased">
    <div class="max-w-3xl w-full bg-white p-8 rounded-xl shadow-lg border border-gray-200">
        <!-- Company Branding -->
        <div class="text-center mb-8">
            <h2 class="text-3xl font-extrabold text-gray-900 mb-2">OnePaper Research Analyst Private Limited</h2>
            <a href="https://www.onepaper.in/" target="_blank" class="text-lg text-blue-600 hover:underline">https://www.onepaper.in/</a>
        </div>

        <h1 class="text-4xl font-extrabold mb-6 text-center">Market Knowledge Assessment</h1>
        <p class="text-lg mb-8 text-center">
            Answer the questions below to test your understanding of market concepts. You have 10 minutes to complete the assessment.
        </p>

        <!-- Timer Display -->
        <div class="text-center mb-8 p-4 bg-pink-100 rounded-lg shadow-sm border border-pink-200">
            <p class="text-xl font-semibold text-pink-800">Time Remaining: <span id="timer" class="font-bold text-2xl">10:00</span></p>
        </div>

        <form id="assessmentForm" class="space-y-8">
            <!-- Question 1: Equity Market Timings -->
            <div class="bg-gray-50 p-6 rounded-lg shadow-sm border border-gray-100 question-block">
                <p class="text-xl font-semibold mb-4">1. What are the Equity Market Timings?</p>
                <div class="space-y-3 options-container">
                    <label class="cursor-pointer rounded-md transition duration-150 ease-in-out">
                        <input type="radio" name="q1" value="9.15 A.M-3.30 PM" class="form-radio h-5 w-5 rounded-full focus:ring-blue-500">
                        <span class="ml-3 text-lg">9.15 A.M-3.30 PM</span>
                    </label>
                    <label class="cursor-pointer rounded-md transition duration-150 ease-in-out">
                        <input type="radio" name="q1" value="9.00 A.M-4.00 P.M" class="form-radio h-5 w-5 rounded-full focus:ring-blue-500">
                        <span class="ml-3 text-lg">9.00 A.M-4.00 P.M</span>
                    </label>
                    <label class="cursor-pointer rounded-md transition duration-150 ease-in-out">
                        <input type="radio" name="q1" value="9.30 A.M-3.30 P.M" class="form-radio h-5 w-5 rounded-full focus:ring-blue-500">
                        <span class="ml-3 text-lg">9.30 A.M-3.30 P.M</span>
                    </label>
                </div>
                <div class="feedback-container mt-4 text-sm"></div>
            </div>

            <!-- Question 2: Regulator of Capital Market -->
            <div class="bg-gray-50 p-6 rounded-lg shadow-sm border border-gray-100 question-block">
                <p class="text-xl font-semibold mb-4">2. Who is the regulator of the Capital Market?</p>
                <div class="space-y-3 options-container">
                    <label class="cursor-pointer rounded-md transition duration-150 ease-in-out">
                        <input type="radio" name="q2" value="RBI" class="form-radio h-5 w-5 rounded-full focus:ring-blue-500">
                        <span class="ml-3 text-lg">RBI</span>
                    </label>
                    <label class="cursor-pointer rounded-md transition duration-150 ease-in-out">
                        <input type="radio" name="q2" value="SSCI" class="form-radio h-5 w-5 rounded-full focus:ring-blue-500">
                        <span class="ml-3 text-lg">SSCI</span>
                    </label>
                    <label class="cursor-pointer rounded-md transition duration-150 ease-in-out">
                        <input type="radio" name="q2" value="SEBI" class="form-radio h-5 w-5 rounded-full focus:ring-blue-500">
                        <span class="ml-3 text-lg">SEBI</span>
                    </label>
                </div>
                <div class="feedback-container mt-4 text-sm"></div>
            </div>

            <!-- Question 3: Allotted time for follow up deal -->
            <div class="bg-gray-50 p-6 rounded-lg shadow-sm border border-gray-100 question-block">
                <p class="text-xl font-semibold mb-4">3. What is the allotted time given for a follow up deal before they are re shuffled?</p>
                <div class="space-y-3 options-container">
                    <label class="cursor-pointer rounded-md transition duration-150 ease-in-out">
                        <input type="radio" name="q3" value="7 Days" class="form-radio h-5 w-5 rounded-full focus:ring-blue-500">
                        <span class="ml-3 text-lg">7 Days</span>
                    </label>
                    <label class="cursor-pointer rounded-md transition duration-150 ease-in-out">
                        <input type="radio" name="q3" value="10 Days" class="form-radio h-5 w-5 rounded-full focus:ring-blue-500">
                        <span class="ml-3 text-lg">10 Days</span>
                    </label>
                    <label class="cursor-pointer rounded-md transition duration-150 ease-in-out">
                        <input type="radio" name="q3" value="5 Days" class="form-radio h-5 w-5 rounded-full focus:ring-blue-500">
                        <span class="ml-3 text-lg">5 Days</span>
                    </label>
                </div>
                <div class="feedback-container mt-4 text-sm"></div>
            </div>

            <!-- Question 4: Why PAN Details -->
            <div class="bg-gray-50 p-6 rounded-lg shadow-sm border border-gray-100 question-block">
                <p class="text-xl font-semibold mb-4">4. Why do we require PAN Details from the client?</p>
                <div class="space-y-3 options-container">
                    <label class="cursor-pointer rounded-md transition duration-150 ease-in-out">
                        <input type="radio" name="q4" value="For KYC" class="form-radio h-5 w-5 rounded-full focus:ring-blue-500">
                        <span class="ml-3 text-lg">For KYC</span>
                    </label>
                    <label class="cursor-pointer rounded-md transition duration-150 ease-in-out">
                        <input type="radio" name="q4" value="For Verification" class="form-radio h-5 w-5 rounded-full focus:ring-blue-500">
                        <span class="ml-3 text-lg">For Verification</span>
                    </label>
                    <label class="cursor-pointer rounded-md transition duration-150 ease-in-out">
                        <input type="radio" name="q4" value="For agreement Sign" class="form-radio h-5 w-5 rounded-full focus:ring-blue-500">
                        <span class="ml-3 text-lg">For agreement Sign</span>
                    </label>
                </div>
                <div class="feedback-container mt-4 text-sm"></div>
            </div>

            <!-- Question 5: Short Selling -->
            <div class="bg-gray-50 p-6 rounded-lg shadow-sm border border-gray-100 question-block">
                <p class="text-xl font-semibold mb-4">5. What is short selling?</p>
                <div class="space-y-3 options-container">
                    <label class="cursor-pointer rounded-md transition duration-150 ease-in-out">
                        <input type="radio" name="q5" value="First Buy then Sell when market is going up" class="form-radio h-5 w-5 rounded-full focus:ring-blue-500">
                        <span class="ml-3 text-lg">First Buy then Sell when market is going up</span>
                    </label>
                    <label class="cursor-pointer rounded-md transition duration-150 ease-in-out">
                        <input type="radio" name="q5" value="First Sell then Buy when market is going up" class="form-radio h-5 w-5 rounded-full focus:ring-blue-500">
                        <span class="ml-3 text-lg">First Sell then Buy when market is going up</span>
                    </label>
                    <label class="cursor-pointer rounded-md transition duration-150 ease-in-out">
                        <input type="radio" name="q5" value="First Buy then Sell when market is going down" class="form-radio h-5 w-5 rounded-full focus:ring-blue-500">
                        <span class="ml-3 text-lg">First Buy then Sell when market is going down</span>
                    </label>
                    <label class="cursor-pointer rounded-md transition duration-150 ease-in-out">
                        <input type="radio" name="q5" value="First Sell then Buy when market is going down" class="form-radio h-5 w-5 rounded-full focus:ring-blue-500">
                        <span class="ml-3 text-lg">First Sell then Buy when market is going down</span>
                    </label>
                </div>
                <div class="feedback-container mt-4 text-sm"></div>
            </div>

            <!-- Question 6: Full form IPO -->
            <div class="bg-gray-50 p-6 rounded-lg shadow-sm border border-gray-100 question-block">
                <p class="text-xl font-semibold mb-4">6. Full form IPO.</p>
                <div class="space-y-3 options-container">
                    <label class="cursor-pointer rounded-md transition duration-150 ease-in-out">
                        <input type="radio" name="q6" value="Initial public offer" class="form-radio h-5 w-5 rounded-full focus:ring-blue-500">
                        <span class="ml-3 text-lg">Initial public offer</span>
                    </label>
                    <label class="cursor-pointer rounded-md transition duration-150 ease-in-out">
                        <input type="radio" name="q6" value="Initially public offering" class="form-radio h-5 w-5 rounded-full focus:ring-blue-500">
                        <span class="ml-3 text-lg">Initially public offering</span>
                    </label>
                    <label class="cursor-pointer rounded-md transition duration-150 ease-in-out">
                        <input type="radio" name="q6" value="Initial public offering" class="form-radio h-5 w-5 rounded-full focus:ring-blue-500">
                        <span class="ml-3 text-lg">Initial public offering</span>
                    </label>
                </div>
                <div class="feedback-container mt-4 text-sm"></div>
            </div>

            <!-- Question 7: Order type for immediate buy/sell -->
            <div class="bg-gray-50 p-6 rounded-lg shadow-sm border border-gray-100 question-block">
                <p class="text-xl font-semibold mb-4">7. Which order type allows you to buy or sell a stock immediately at the best available price?</p>
                <div class="space-y-3 options-container">
                    <label class="cursor-pointer rounded-md transition duration-150 ease-in-out">
                        <input type="radio" name="q7" value="Limit order" class="form-radio h-5 w-5 rounded-full focus:ring-blue-500">
                        <span class="ml-3 text-lg">Limit order</span>
                    </label>
                    <label class="cursor-pointer rounded-md transition duration-150 ease-in-out">
                        <input type="radio" name="q7" value="Market order" class="form-radio h-5 w-5 rounded-full focus:ring-blue-500">
                        <span class="ml-3 text-lg">Market order</span>
                    </label>
                    <label class="cursor-pointer rounded-md transition duration-150 ease-in-out">
                        <input type="radio" name="q7" value="Stop order" class="form-radio h-5 w-5 rounded-full focus:ring-blue-500">
                        <span class="ml-3 text-lg">Stop order</span>
                    </label>
                    <label class="cursor-pointer rounded-md transition duration-150 ease-in-out">
                        <input type="radio" name="q7" value="Day order" class="form-radio h-5 w-5 rounded-full focus:ring-blue-500">
                        <span class="ml-3 text-lg">Day order</span>
                    </label>
                </div>
                <div class="feedback-container mt-4 text-sm"></div>
            </div>

            <!-- Question 8: Intraday trading term -->
            <div class="bg-gray-50 p-6 rounded-lg shadow-sm border border-gray-100 question-block">
                <p class="text-xl font-semibold mb-4">8. What term refers to the practice of buying and selling a stock in a single trading day?</p>
                <div class="space-y-3 options-container">
                    <label class="cursor-pointer rounded-md transition duration-150 ease-in-out">
                        <input type="radio" name="q8" value="Swing trading" class="form-radio h-5 w-5 rounded-full focus:ring-blue-500">
                        <span class="ml-3 text-lg">Swing trading</span>
                    </label>
                    <label class="cursor-pointer rounded-md transition duration-150 ease-in-out">
                        <input type="radio" name="q8" value="Long-term investing" class="form-radio h-5 w-5 rounded-full focus:ring-blue-500">
                        <span class="ml-3 text-lg">Long-term investing</span>
                    </label>
                    <label class="cursor-pointer rounded-md transition duration-150 ease-in-out">
                        <input type="radio" name="q8" value="Intraday trading" class="form-radio h-5 w-5 rounded-full focus:ring-blue-500">
                        <span class="ml-3 text-lg">Intraday trading</span>
                    </label>
                    <label class="cursor-pointer rounded-md transition duration-150 ease-in-out">
                        <input type="radio" name="q8" value="Value investing" class="form-radio h-5 w-5 rounded-full focus:ring-blue-500">
                        <span class="ml-3 text-lg">Value investing</span>
                    </label>
                </div>
                <div class="feedback-container mt-4 text-sm"></div>
            </div>

            <!-- Question 9: Purpose of stop-loss order -->
            <div class="bg-gray-50 p-6 rounded-lg shadow-sm border border-gray-100 question-block">
                <p class="text-xl font-semibold mb-4">9. What is the purpose of a stop-loss order?</p>
                <div class="space-y-3 options-container">
                    <label class="cursor-pointer rounded-md transition duration-150 ease-in-out">
                        <input type="radio" name="q9" value="To buy a stock at a lower price than the current market value." class="form-radio h-5 w-5 rounded-full focus:ring-blue-500">
                        <span class="ml-3 text-lg">To buy a stock at a lower price than the current market value.</span>
                    </label>
                    <label class="cursor-pointer rounded-md transition duration-150 ease-in-out">
                        <input type="radio" name="q9" value="To limit losses by selling a stock if its price drops to a specified level." class="form-radio h-5 w-5 rounded-full focus:ring-blue-500">
                        <span class="ml-3 text-lg">To limit losses by selling a stock if its price drops to a specified level.</span>
                    </label>
                    <label class="cursor-pointer rounded-md transition duration-150 ease-in-out">
                        <input type="radio" name="q9" value="To take advantage of potential price increases in a volatile market." class="form-radio h-5 w-5 rounded-full focus:ring-blue-500">
                        <span class="ml-3 text-lg">To take advantage of potential price increases in a volatile market.</span>
                    </label>
                    <label class="cursor-pointer rounded-md transition duration-150 ease-in-out">
                        <input type="radio" name="q9" value="To purchase a stock automatically when it reaches a certain price level." class="form-radio h-5 w-5 rounded-full focus:ring-blue-500">
                        <span class="ml-3 text-lg">To purchase a stock automatically when it reaches a certain price level.</span>
                    </label>
                </div>
                <div class="feedback-container mt-4 text-sm"></div>
            </div>

            <!-- Question 10: ROI Formula -->
            <div class="bg-gray-50 p-6 rounded-lg shadow-sm border border-gray-100 question-block">
                <p class="text-xl font-semibold mb-4">10. What is the formula to calculate the Return on Investment (ROI) for a stock?</p>
                <div class="space-y-3 options-container">
                    <label class="cursor-pointer rounded-md transition duration-150 ease-in-out">
                        <input type="radio" name="q10" value="(Current Stock Price – Purchase Price) / Number of Shares" class="form-radio h-5 w-5 rounded-full focus:ring-blue-500">
                        <span class="ml-3 text-lg">(Current Stock Price – Purchase Price) / Number of Shares</span>
                    </label>
                    <label class="cursor-pointer rounded-md transition duration-150 ease-in-out">
                        <input type="radio" name="q10" value="(Purchase Price – Current Stock Price) / Number of Shares" class="form-radio h-5 w-5 rounded-full focus:ring-blue-500">
                        <span class="ml-3 text-lg">(Purchase Price – Current Stock Price) / Number of Shares</span>
                    </label>
                    <label class="cursor-pointer rounded-md transition duration-150 ease-in-out">
                        <input type="radio" name="q10" value="(Current Stock Price – Purchase Price) / Purchase Price" class="form-radio h-5 w-5 rounded-full focus:ring-blue-500">
                        <span class="ml-3 text-lg">(Current Stock Price – Purchase Price) / Purchase Price</span>
                    </label>
                    <label class="cursor-pointer rounded-md transition duration-150 ease-in-out">
                        <input type="radio" name="q10" value="(Purchase Price – Current Stock Price) / Purchase Price" class="form-radio h-5 w-5 rounded-full focus:ring-blue-500">
                        <span class="ml-3 text-lg">(Purchase Price – Current Stock Price) / Purchase Price</span>
                    </label>
                </div>
                <div class="feedback-container mt-4 text-sm"></div>
            </div>

            <!-- User Name Input -->
            <div class="bg-gray-50 p-6 rounded-lg shadow-sm border border-gray-100">
                <label for="userName" class="block text-xl font-semibold mb-2">Your Name:</label>
                <input type="text" id="userName" name="userName" placeholder="Enter your full name" class="w-full p-3 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500 text-lg">
            </div>

            <button type="submit" id="submitButton" class="w-full bg-black hover:bg-gray-800 text-white font-bold py-4 px-6 rounded-lg shadow-md transition duration-300 ease-in-out transform hover:scale-105 focus:outline-none focus:ring-4 focus:ring-black focus:ring-opacity-50 text-xl">
                Submit Assessment
            </button>
        </form>

        <!-- Score Display Section -->
        <div id="scoreResult" class="mt-10 p-8 bg-pink-100 rounded-xl shadow-lg border border-pink-200 hidden">
            <h2 class="text-3xl font-extrabold text-pink-800 mb-4 text-center">Assessment Results</h2>
            <p class="text-2xl text-pink-700 font-semibold mb-4 text-center">Your Score: <span id="scoreValue" class="text-pink-900"></span> / <span id="totalQuestions"></span></p>
            <p id="feedbackMessage" class="text-xl text-pink-600 text-center mb-6"></p>

            <div class="flex flex-col sm:flex-row justify-center items-center space-y-4 sm:space-y-0 sm:space-x-4">
                <button id="whatsappTrainerButton" class="bg-pink-700 hover:bg-pink-800 text-white font-bold py-3 px-6 rounded-lg shadow-md transition duration-300 ease-in-out transform hover:scale-105 focus:outline-none focus:ring-4 focus:ring-pink-500 focus:ring-opacity-50 text-lg">
                    Send Score via WhatsApp
                </button>
            </div>
        </div>

        <!-- Custom Modal for Alerts -->
        <div id="customAlertModal" class="fixed inset-0 bg-gray-900 bg-opacity-75 flex items-center justify-center z-50 hidden">
            <div class="bg-white p-8 rounded-xl shadow-2xl max-w-sm w-full text-center border border-gray-200">
                <p id="customAlertMessage" class="text-xl font-semibold text-gray-800 mb-6"></p>
                <button id="customAlertCloseButton" class="bg-black hover:bg-gray-800 text-white font-bold py-3 px-6 rounded-lg shadow-md transition duration-300 ease-in-out transform hover:scale-105 focus:outline-none focus:ring-4 focus:ring-black focus:ring-opacity-50 text-lg">
                    OK
                </button>
            </div>
        </div>

        <!-- "Made by" Footer -->
        <div class="mt-10 text-center text-sm text-gray-700">
            <p>Made by Rajen Patwari</p>
        </div>
    </div>

    <script>
        // Define the questions, correct answers, and points
        const questions = [
            {
                name: "q1",
                type: "radio",
                correctAnswer: "9.15 A.M-3.30 PM",
                points: 1, // Changed to 1 mark
                questionText: "What are the Equity Market Timings?",
                options: ["9.15 A.M-3.30 PM", "9.00 A.M-4.00 P.M", "9.30 A.M-3.30 P.M"]
            },
            {
                name: "q2",
                type: "radio",
                correctAnswer: "SEBI",
                points: 1, // Changed to 1 mark
                questionText: "Who is the regulator of the Capital Market?",
                options: ["RBI", "SSCI", "SEBI"]
            },
            {
                name: "q3",
                type: "radio",
                correctAnswer: "5 Days",
                points: 1, // Changed to 1 mark
                questionText: "What is the allotted time given for a follow up deal before they are re shuffled?",
                options: ["7 Days", "10 Days", "5 Days"]
            },
            {
                name: "q4",
                type: "radio",
                correctAnswer: "For KYC",
                points: 1, // Changed to 1 mark
                questionText: "Why do we require PAN Details from the client?",
                options: ["For KYC", "For Verification", "For agreement Sign"]
            },
            {
                name: "q5",
                type: "radio",
                correctAnswer: "First Sell then Buy when market is going down",
                points: 1, // Changed to 1 mark
                questionText: "What is short selling?",
                options: ["First Buy then Sell when market is going up", "First Sell then Buy when market is going up", "First Buy then Sell when market is going down", "First Sell then Buy when market is going down"]
            },
            {
                name: "q6",
                type: "radio",
                correctAnswer: "Initial public offering",
                points: 1, // Changed to 1 mark
                questionText: "Full form IPO.",
                options: ["Initial public offer", "Initially public offering", "Initial public offering"]
            },
            {
                name: "q7",
                type: "radio",
                correctAnswer: "Market order",
                points: 1, // Changed to 1 mark
                questionText: "Which order type allows you to buy or sell a stock immediately at the best available price?",
                options: ["Limit order", "Market order", "Stop order", "Day order"]
            },
            {
                name: "q8",
                type: "radio",
                correctAnswer: "Intraday trading",
                points: 1, // Changed to 1 mark
                questionText: "What term refers to the practice of buying and selling a stock in a single trading day?",
                options: ["Swing trading", "Long-term investing", "Intraday trading", "Value investing"]
            },
            {
                name: "q9",
                type: "radio",
                correctAnswer: "To limit losses by selling a stock if its price drops to a specified level.",
                points: 1, // Changed to 1 mark
                questionText: "What is the purpose of a stop-loss order?",
                options: ["To buy a stock at a lower price than the current market value.", "To limit losses by selling a stock if its price drops to a specified level.", "To take advantage of potential price increases in a volatile market.", "To purchase a stock automatically when it reaches a certain price level."]
            },
            {
                name: "q10",
                type: "radio",
                correctAnswer: "(Current Stock Price – Purchase Price) / Purchase Price",
                points: 1, // Changed to 1 mark
                questionText: "What is the formula to calculate the Return on Investment (ROI) for a stock?",
                options: ["(Current Stock Price – Purchase Price) / Number of Shares", "(Purchase Price – Current Stock Price) / Number of Shares", "(Current Stock Price – Purchase Price) / Purchase Price", "(Purchase Price – Current Stock Price) / Purchase Price"]
            }
        ];

        const assessmentForm = document.getElementById('assessmentForm');
        const submitButton = document.getElementById('submitButton');
        const scoreResultDiv = document.getElementById('scoreResult');
        const scoreValueSpan = document.getElementById('scoreValue');
        const totalQuestionsSpan = document.getElementById('totalQuestions');
        const feedbackMessageP = document.getElementById('feedbackMessage');
        const whatsappTrainerButton = document.getElementById('whatsappTrainerButton');
        const userNameInput = document.getElementById('userName');
        const timerDisplay = document.getElementById('timer');

        // Custom Alert Modal elements
        const customAlertModal = document.getElementById('customAlertModal');
        const customAlertMessage = document.getElementById('customAlertMessage');
        const customAlertCloseButton = document.getElementById('customAlertCloseButton');

        let timerInterval;
        let timeLeft = 10 * 60; // 10 minutes in seconds
        let quizSubmitted = false;

        // Function to show custom alert
        function showAlert(message) {
            customAlertMessage.textContent = message;
            customAlertModal.classList.remove('hidden');
        }

        // Event listener for custom alert close button
        customAlertCloseButton.addEventListener('click', () => {
            customAlertModal.classList.add('hidden');
        });

        // Function to update timer display
        function updateTimerDisplay() {
            const minutes = Math.floor(timeLeft / 60);
            const seconds = timeLeft % 60;
            timerDisplay.textContent = `${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
        }

        // Function to start the timer
        function startTimer() {
            timerInterval = setInterval(() => {
                timeLeft--;
                updateTimerDisplay();

                if (timeLeft <= 0) {
                    clearInterval(timerInterval);
                    if (!quizSubmitted) { // Only auto-submit if not already submitted
                        autoSubmitQuiz();
                    }
                }
            }, 1000);
        }

        // Function to auto-submit the quiz when time runs out
        function autoSubmitQuiz() {
            showAlert("Time's up! Your assessment has been automatically submitted.");
            // Programmatically trigger form submission
            if (assessmentForm.requestSubmit) {
                assessmentForm.requestSubmit();
            } else {
                submitButton.click();
            }
        }

        // Function to disable all form inputs
        function disableFormInputs() {
            const formElements = assessmentForm.elements;
            for (let i = 0; i < formElements.length; i++) {
                formElements[i].disabled = true;
            }
            submitButton.classList.add('hidden'); // Hide submit button after submission
        }

        // Function to display feedback (correct/incorrect answers)
        function displayFeedback(userAnswers) {
            questions.forEach((q, index) => {
                const questionBlock = document.querySelector(`.question-block:nth-of-type(${index + 1})`);
                const optionsContainer = questionBlock.querySelector('.options-container');
                const feedbackContainer = questionBlock.querySelector('.feedback-container');
                const radios = optionsContainer.querySelectorAll(`input[name="${q.name}"]`);
                const userAnswer = userAnswers[q.name];

                let feedbackText = '';

                radios.forEach(radio => {
                    const label = radio.closest('label');
                    if (radio.value === q.correctAnswer) {
                        // Highlight correct answer
                        label.classList.add('selected-correct', 'border');
                        if (radio.value === userAnswer) {
                            feedbackText = '<span class="correct-answer-feedback">Correct!</span>';
                        } else {
                            feedbackText += `<span class="correct-answer-feedback">Correct Answer: ${q.correctAnswer}</span>`;
                        }
                    } else if (radio.value === userAnswer && radio.value !== q.correctAnswer) {
                        // Highlight user's incorrect answer
                        label.classList.add('selected-incorrect', 'border');
                        feedbackText = '<span class="incorrect-answer-feedback">Incorrect.</span>';
                        feedbackText += `<br><span class="correct-answer-feedback">Correct Answer: ${q.correctAnswer}</span>`;
                    }
                    // Disable all radio buttons
                    radio.disabled = true;
                });

                feedbackContainer.innerHTML = feedbackText;
            });
        }

        // Set the total possible score (now based on 1 point per question)
        const totalPossibleScore = questions.length; // Total number of questions
        totalQuestionsSpan.textContent = totalPossibleScore;

        // Start the timer when the page loads
        window.onload = startTimer;

        assessmentForm.addEventListener('submit', function(event) {
            event.preventDefault(); // Prevent default form submission

            // If already submitted (e.g., by auto-submit), prevent re-processing
            if (quizSubmitted) {
                return;
            }
            quizSubmitted = true; // Mark as submitted

            clearInterval(timerInterval); // Stop the timer

            const formData = new FormData(assessmentForm);
            let score = 0;
            let allAnswered = true;
            const userAnswers = {}; // To store user's answers for WhatsApp

            // Validate user name
            const userName = userNameInput.value.trim();
            if (!userName) {
                showAlert("Please enter your name before submitting the assessment.");
                quizSubmitted = false; // Allow re-submission if name is missing
                startTimer(); // Restart timer if submission was blocked by validation
                return;
            }
            userAnswers.userName = userName;

            questions.forEach(q => {
                let userAnswer = formData.get(q.name);

                userAnswers[q.name] = userAnswer; // Store for WhatsApp

                if (userAnswer === null) { // For radio buttons, null means not selected
                    allAnswered = false;
                } else {
                    if (userAnswer === q.correctAnswer) {
                        score += q.points;
                    }
                }
            });

            if (!allAnswered) {
                showAlert("Please answer all questions before submitting.");
                quizSubmitted = false; // Allow re-submission if not all questions are answered
                startTimer(); // Restart timer if submission was blocked by validation
                return;
            }

            // Disable all inputs and hide submit button immediately after successful submission
            disableFormInputs();

            // Display score
            scoreValueSpan.textContent = score;
            scoreResultDiv.classList.remove('hidden'); // Show the score section

            // Provide feedback based on score
            let feedback = '';
            if (score === totalPossibleScore) {
                feedback = "Excellent! You got a perfect score!";
            } else if (score >= totalPossibleScore * 0.7) { // 70% or more (7 out of 10)
                feedback = "Great job! You have a good understanding.";
            } else {
                feedback = "Keep practicing! There's room for improvement.";
            }
            feedbackMessageP.textContent = feedback;

            // Display correct/incorrect feedback for each question
            displayFeedback(userAnswers);

            // Appreciation popup if score > 59% (i.e., 6 or more correct answers)
            if (score > (totalPossibleScore * 0.59)) { // Score is greater than 59% of total possible score
                showAlert("Nice progress!");
            }

            // Prepare WhatsApp content
            const trainerPhoneNumber = "8250547520"; // Trainer's WhatsApp number
            let whatsappBody = `Hello Trainer,\n\n`;
            whatsappBody += `This is ${userName}. I have completed the assessment.\n`;
            whatsappBody += `My score is: ${score} out of ${totalPossibleScore}.\n\n`;
            whatsappBody += `Here are my answers:\n\n`;
            questions.forEach((q, index) => {
                whatsappBody += `${index + 1}. ${q.questionText}\n`;
                whatsappBody += `   Your answer: ${userAnswers[q.name] || 'Not answered'}\n`; // Handle not answered case for WhatsApp
                whatsappBody += `   Correct answer: ${q.correctAnswer}\n\n`;
            });
            whatsappBody += `Best regards,\n${userName}`;
            const whatsappLink = `https://wa.me/${trainerPhoneNumber}?text=${encodeURIComponent(whatsappBody)}`;

            whatsappTrainerButton.onclick = () => {
                window.open(whatsappLink, '_blank'); // Open WhatsApp link in a new tab
            };

            // Scroll to the result section
            scoreResultDiv.scrollIntoView({ behavior: 'smooth', block: 'start' });
        });
    </script>
</body>
</html>
